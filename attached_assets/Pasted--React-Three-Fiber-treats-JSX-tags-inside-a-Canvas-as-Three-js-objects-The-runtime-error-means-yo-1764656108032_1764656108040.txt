
React Three Fiber treats JSX tags inside a <Canvas> as Three.js objects. The runtime error means you used a lowercase tag or a component that renders a plain DOM <div> (or another DOM element) directly inside the Canvas, and R3F tried to interpret it as a Three object named div. R3F does not know a div Three object unless you explicitly register one with extend, so the render fails and the overlay appears.

---

Quick fixes
- Move DOM elements outside the Canvas — keep UI (buttons, modals, overlays) in normal React DOM, not inside <Canvas>.  
- Use Html from @react-three/drei to render DOM inside the 3D scene safely.  
- Use primitive or mesh for Three objects if you intended to render a Three object, not a DOM element.  
- Register custom Three classes with extend only when you actually have a Three class to expose as a JSX primitive.

---

Code examples

Use Html for DOM overlays inside the scene
`tsx
import { Canvas } from '@react-three/fiber';
import { Html } from '@react-three/drei';

function SolarSystemScene() {
  return (
    <Canvas>
      {/ three objects like lights, camera, meshes /}
      <ambientLight />
      <mesh position={[0, 0, 0]}>
        <sphereGeometry args={[1, 32, 32]} />
        <meshStandardMaterial color="orange" />
      </mesh>

      {/ DOM overlay attached to a 3D position /}
      <Html position={[0, 1.5, 0]}>
        <div className="label">Mercury</div>
      </Html>
    </Canvas>
  );
}
`

Move UI outside Canvas
`tsx
function App() {
  return (
    <>
      <Canvas>{/ only three objects here /}</Canvas>
      {/ regular DOM UI outside the Canvas /}
      <div className="ui">
        <button>Toggle Solar System</button>
      </div>
    </>
  );
}
`

Render a Three object with primitive
If you have a THREE.Object3D instance and want to render it:
`tsx
// myObject is a THREE.Object3D created elsewhere
<primitive object={myObject} />
`

Register a custom Three class with extend
Only do this if you have a real Three class to expose as JSX:
`ts
import { extend } from '@react-three/fiber';
import { SomeThreeClass } from 'some-three-package';

// expose <someThreeClass /> as a JSX element
extend({ SomeThreeClass });

// then in JSX
// <someThreeClass args={[...]} />
`
Also update TypeScript types if needed:
`ts
declare global {
  namespace JSX {
    interface IntrinsicElements {
      someThreeClass: any;
    }
  }
}
`

---

Debugging checklist
- Search for any plain DOM tags inside <Canvas> (e.g., div, button, span) and move them out or wrap with <Html>.  
- Inspect custom components used inside Canvas — ensure they return Three objects (mesh, group, primitive) not DOM.  
- If you intended to use a third‑party R3F component, confirm you imported it from @react-three/drei or the package that provides it.  
- Temporarily disable the HMR overlay by setting server.hmr.overlay = false in vite.config.js to avoid the blocking overlay while you iterate, but fix the root cause afterward.

---

Preventative tips
- Keep a strict separation: Canvas = Three objects, outside Canvas = DOM UI. Use Html for occasional DOM tied to 3D positions.  
- Lint or grep for lowercase tags inside Canvas during code reviews.  
- Add a small runtime guard in your scene components that logs the type of children being rendered to catch accidental DOM returns early.

---

Next steps I can provide
I can generate a small patch that:
- Replaces any <div> inside your Canvas with <Html> or moves it outside,  
- Adds a runtime log that prints the first-level children of your Canvas so you can spot DOM leaks quickly.  

